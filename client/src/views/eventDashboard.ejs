<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Event Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  </head>
  <body>
    <nav class="navbar" style="background-color: #e3f2fd;">
        <div class="container">
          <a class="navbar-brand" href="#">
            <img src="/logo.png" alt="Twitter Reloaded" width="30" height="24">
          </a>
        </div>
        <ul class="nav justify-content-end" style="color: black;">
            <li class="nav-item">
              <a class="nav-link active" href="/twitterReloadedDashboard/logout">LogOut</a>
            </li>
          </ul>
      </nav>
      <div class="container">
        <div class="row">
            <div class="col-8">
                <h2 style="margin: 30px 0px;"><b>Events</b> <%=headerDate.date%></h2>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead class="table-dark">
                            <tr>
                              <th scope="col">Action</th>
                              <th scope="col">User</th>
                              <th scope="col">Timestamp</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                                <td colspan="3"><b>Tweets</b></td>
                            </tr>
                            <% for(let tweet of tweetData) { %>
                                <tr>
                                    <% if(tweet.replyToTweetId == null) { %>
                                        <td>Tweet</td>
                                    <% } else { %>
                                        <td>Comment</td>
                                    <% } %>
                                    <td><%=tweet.user.firstName%> <%=tweet.user.lastName%></td>
                                    <td><%=tweet.createdAt%></td>
                                  </tr>
                            <% } %>
                            <tr>
                                <td colspan="3"><b>User Logins</b></td>
                            </tr>
                            <% for(let login of loginData) { %>
                                <tr>
                                    <td>Login</td>
                                    <td><%=login.user.firstName%> <%=login.user.lastName%></td>
                                    <td><%=login.createdAt%></td>
                                  </tr>
                            <% } %>
                          </tbody>
                    </table>
                  </div>
            </div>
            <div class="col-4 text" style="margin: 30px 0px;">
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">Most Active User</div>
                    <div class="card-body">
                      <h5 class="card-title"><%=reportData.mostActiveUser%></h5>
                      <p class="card-text">User which has generated the greatest number of events.</p>
                    </div>
                </div>
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">Most Interesting Tweet</div>
                    <div class="card-body">
                      <h5 class="card-title"><%=reportData.mostIntrestingTweet%></h5>
                      <p class="card-text">Tweet with the greatest number of replies.</p>
                    </div>
                </div>
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">Total Active Users</div>
                    <div class="card-body">
                      <h5 class="card-title"><%=reportData.totalUsers%></h5>
                      <p class="card-text">Total number of users which have opened the app throughout the day.</p>
                    </div>
                </div>
                <div class="text-center">
                    <button type="button" class="btn btn-outline-dark">Download Report</button>
                </div>
            </div>
          </div>
      </div>
  </body>
</html>